<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Autism Spectrum Disorders</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow-lg p-4">
        <h2 class="text-center text-success">AUTISM SPECTRUM DISORDERS</h2>

        <form id="autismForm">
            <div class="row">
                {% set questions = [
                    "I often notice small sounds when others do not:",
                    "I find it easy to do more than one thing at once:",
                    "I find it easy to ‘read between the lines’ when someone is talking to me:",
                    "When I’m reading a story I find it difficult to work out the characters’ intentions:",
                    "I find it easy to work out what someone is thinking or feeling just by looking at their face:",
                    "I usually concentrate more on the whole picture, rather than the small details:",
                    "If there is an interruption, I can switch back to what I was doing very quickly:",
                    "I know how to tell if someone listening to me is getting bored:",
                    "I like to collect information about categories of things:",
                    "I find it difficult to work out people’s intentions:"
                ] %}

                {% for i in range(1, 11) %}
                <div class="col-md-6 mt-3">
                    <label class="form-label">{{ questions[i-1] }}</label>
                    <select class="form-select" name="q{{ i }}" required>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>
                {% endfor %}

                <!-- Age -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Age</label>
                    <input type="number" class="form-control" name="age" required min="5" max="100">
                </div>

                <!-- Gender -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Gender</label>
                    <select class="form-select" name="gender" required>
                        <option value="0">Male</option>
                        <option value="1">Female</option>
                    </select>
                </div>

                <!-- Ethnicity -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Ethnicity</label>
                    <select class="form-select" name="ethnicity" required>
                        <option value="0">White-European</option>
                        <option value="1">Asian</option>
                        <option value="2">Mixed</option>
                        <option value="3">Middle Eastern</option>
                        <option value="4">Black</option>
                        <option value="5">South Asian</option>
                        <option value="6">Turkish</option>
                        <option value="7">Latino</option>
                        <option value="8">Hispanic</option>
                        <option value="9">Pasifika</option>
                        <option value="10">Others</option>
                    </select>
                </div>

                <!-- Jaundice -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Jaundice (Born with Yellowish Skin?)</label>
                    <select class="form-select" name="jaundice" required>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>

                <!-- Autism Family History -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Family History of Autism?</label>
                    <select class="form-select" name="autism" required>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>

                <!-- Relation -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Relation</label>
                    <select class="form-select" name="relation" required>
                        <option value="0">Self</option>
                        <option value="1">Parent</option>
                        <option value="2">Health Professional</option>
                        <option value="3">Relative</option>
                        <option value="4">Other</option>
                    </select>
                </div>

                <!-- Model Selection -->
                <div class="col-md-6 mt-3">
                    <label class="form-label">Select Model</label>
                    <select class="form-select" name="model" required>
                        {% for model in models %}
                        <option value="{{ model }}">{{ model }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success btn-lg">Predict</button>
            </div>
        </form>

        <div id="result" class="alert alert-info text-center mt-4" style="display: none;">
            <div id="loading" class="text-center mt-4" style="display: none;">
            <div class="spinner-border text-success" role="status">
            <span class="visually-hidden">Processing...</span>
        </div>
            <p class="mt-2">Analyzing your inputs...</p>
        </div>

        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
    $("#autismForm").submit(function(event){
        event.preventDefault();

        $("#result").hide();
        $("#loading").show();

        $.ajax({
            type: "POST",
            url: "/predict",
            data: $(this).serialize(),
            success: function(response){
                $("#loading").hide();

                if (response.error) {
                    $("#result").html("<strong>Error:</strong> " + response.error).fadeIn();
                } else {
                    $("#result").html(
                        "<strong>Selected Model:</strong> " + response.selected_model + "<br>" +
                        "<strong>Prediction:</strong> <strong style='color: red;'>" + response.prediction + "</strong><br>" +
                        "<strong>Model Accuracy:</strong> " + response.accuracy + "<br>"
                    ).fadeIn();
                }
            },
            error: function(){
                $("#loading").hide();
                $("#result").html("<strong>Error:</strong> Something went wrong.").fadeIn();
            }
        });
    });
});

</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

